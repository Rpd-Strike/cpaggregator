{% load static from staticfiles %}
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport'>
	<meta name="viewport" content="width=device-width">
	<title>{% block title_tag %}Compete{% endblock %} - competitive</title>

	<link rel="shortcut icon" type="image/x-icon" href="{% static 'favicon.ico' %}?r=31241"/>
	<!-- fonts -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css"
		  integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP"
		  crossorigin="anonymous">

	<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!-- stylesheets -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
		  integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
		  crossorigin="anonymous">

	<link rel="stylesheet" href="{% static 'css/bootstrap-flatly.min.css' %}" type="text/css">
	<link rel="stylesheet" href="{% static 'css/competitive.css' %}" type="text/css">
	<!-- js -->
	<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
            integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
            crossorigin="anonymous"></script>
	<script src=//unpkg.com/laue></script>
	<script src="{% static 'js/competitive.js' %}"></script>

</head>

<body>
	<nav class="navbar navbar-dark navbar-expand-lg bg-primary" role="navigation" id="navbar">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button class="navbar-toggler text-center" type="button" data-toggle="collapse"
						data-target="#navigation-2" aria-controls="navigation-2"
						aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<a class="ml-3 navbar-brand brand capitalize" href="{% url 'home' %}">
					competitive
				</a>
			</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="navigation-2">
				<ul class="navbar-nav navbar-right vertical-align mr-auto">
					{% if user.is_authenticated %}
					<li>
						<a href="{% url 'task-list' %}" class="nav-link">Tasks</a>
					</li>
					<li>
						<a href="{% url 'rank-list' %}" class="nav-link">Hall of fame</a>
					</li>
				</ul>
				<ul class="navbar-nav navbar-right vertical-align">
					<li class="nav-item dropdown font-weight-bold">
						<a id="navbar-user-dropdown" href="#" class="nav-link dropdown-toggle"
						   role="button" data-toggle="dropdown" aria-haspopup="true"
						   aria-expanded="false">
                        {% include "accounts/thumbnail_profile.html" with user=request.user %}
						</a>
						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbar-user-dropdown">
							<a class="dropdown-item"
							   data-toggle="modal" href="#modal"
							   onclick="loadModalForm('{% url 'group-create' %}');">
								<i class="fas fa-xs fa-plus"></i>
								<span class="mx-2">Create a group</span>
							</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="{% url 'me' %}">
								<i class="fas fa-xs fa-user-alt"></i>
								<span class="mx-2">Profile</span>
							</a>
							<a href="{% url 'logout' %}" class="dropdown-item">
								<i class="fas fa-xs fa-sign-out-alt"></i>
								<span class="mx-2">Log out</span>
							</a>
							<div class="dropdown-divider"></div>
							<a href="{% url 'feedback-create' %}" class="dropdown-item">
								<i class="fas fa-xs fa-comments"></i>
								<span class="mx-2">Leave feedback</span>
							</a>
						</div>
					</li>
					{% else %}
					<li>
						<a href="{% url 'home' %}" class="nav-link">Home</a>
					</li>
					<li>
						<a href="{% url 'login' %}" class="nav-link">Log in</a>
					</li>
					<li>
						<a href="{% url 'register' %}" class="nav-link">Sign up</a>
					</li>
					{% endif %}
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container-->
	</nav>
	<div class="wrapper page-wrapper {% block wrapper_class %}{% endblock %} mt-3">
		<div class="modal fade" tabindex="-1" role="dialog" id="modal">
			<div class="modal-dialog modal-lg" id="modal-dialog" role="document">
			</div>
		</div>
        {% block body_content %}{% endblock %}
	</div>

	<footer class="footer section-dark my-3">
		<div class="container">
			<div class="copyright pull-right">
                <span class="text-muted small">&copy; {% now "Y" %} | competitive</span>
			</div>
		</div>
	</footer>
	<script type="text/javascript">
		$(function () {
		  $('[data-toggle="popover"]').popover()
		})
		$(function () {
		  $('[data-toggle="tooltip"]').tooltip()
		})
		function loadModalForm(url) {
			$.ajax({
				url: url,
				type: 'GET',
				success: function(data, textStatus, jqXHR) {
					if (data.status == 200) {
						$('#modal .modal-dialog').html(data.content);
					}
				}
			})
			$('#modal .modal-dialog').html
		}
		function genericLoadDialog(form_selector, matchString) {
			$.ajax({
				url: $(form_selector).attr('action'),
				type: 'POST',
				data:  $(form_selector).serialize(),
				success: function(data, textStatus, jqXHR) {
					console.log(data);
					if (data.status == 500) {
						$("body").html(data.content);
						return false;
					}
					if (data.status == 302) {
						window.location = data.content;
					} else {
						$('#modal .modal-dialog').html(data.content);
						return false;
					}
				},
			})
		}
	</script>
	{% block js_scripts %}{% endblock %}
</body>



</html>
